 <!DOCTYPE html> 
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cinematic Flower Apology</title>
<style> 
*{margin:0;padding:0;box-sizing:border-box;}
body, html{width:100%;height:100%;overflow:hidden;background: linear-gradient(to top,#0a0a0a,#1c1c2e);font-family:'Georgia',serif;color:#fff;}
#cinema{position:relative;width:100%;height:100%;}
canvas{position:absolute;width:100%;height:100%;display:block;}
#particles{position:absolute;width:100%;height:100%;pointer-events:none;}
.particle{position:absolute;border-radius:50%;background: rgba(255,255,255,0.3);animation: float 15s linear infinite;}
@keyframes float{0%{transform: translateY(0) translateX(0);}50%{transform: translateY(-50px) translateX(20px);}100%{transform: translateY(0) translateX(0);}}
#message{position:absolute;bottom:10%;width:100%;text-align:center;font-size:1.6rem;line-height:2.2rem;letter-spacing:0.5px;pointer-events:none;}
#message p{opacity:0;transition: opacity 1s ease-in-out;}
</style>
</head>
<body>
<div id="cinema">
<canvas id="flowerCanvas"></canvas>
<div id="particles"></div>
<div id="message">
<p id="line1"></p>
<p id="line2"></p>
<p id="line3"></p>
<p id="line4"></p>
<p id="line5"></p>
<p id="line6"></p>
</div>
</div>

<script>
// Canvas setup
const canvas=document.getElementById('flowerCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
window.addEventListener('resize',()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;drawFlower(currentBloom);});

const center={x:canvas.width/2,y:canvas.height/2+50};
let currentBloom=0;

// Particles
const particlesContainer=document.getElementById('particles');
for(let i=0;i<80;i++){
  const p=document.createElement('div');
  p.className='particle';
  p.style.width=`${Math.random()*3+2}px`;
  p.style.height=p.style.width;
  p.style.top=`${Math.random()*window.innerHeight}px`;
  p.style.left=`${Math.random()*window.innerWidth}px`;
  p.style.animationDuration=`${Math.random()*15+10}s`;
  particlesContainer.appendChild(p);
}

// Petal drawing
function drawPetal(ctx, angle, bloom, sway, glow){
  const petalLength=100+150*bloom; // increased for large screen coverage
  const petalWidth=30+30*bloom;
  ctx.save();
  ctx.translate(center.x, center.y);
  ctx.rotate(angle+sway);
  const gradient=ctx.createRadialGradient(0,0,0,0,0,petalLength);
  gradient.addColorStop(0, `rgba(${255},${180+20*bloom},${180+20*bloom},${0.6+0.3*glow})`);
  gradient.addColorStop(1, `rgba(${255},${150+20*bloom},${150+20*bloom},${0.2+0.3*glow})`);
  ctx.fillStyle=gradient;
  ctx.shadowColor=`rgba(255,200,150,${glow})`;
  ctx.shadowBlur=40*glow;
  ctx.beginPath();
  ctx.moveTo(0,0);
  ctx.quadraticCurveTo(petalWidth,-petalLength/2,0,-petalLength);
  ctx.quadraticCurveTo(-petalWidth,-petalLength/2,0,0);
  ctx.fill();
  ctx.restore();
}

// Flower drawing
function drawFlower(bloom){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  const petals=8;
  for(let i=0;i<petals;i++){
    const sway=Math.sin(Date.now()/500 + i)*0.05;
    const glow=bloom;
    drawPetal(ctx,i*(2*Math.PI/petals),bloom,sway,glow);
  }
  const gradient=ctx.createRadialGradient(center.x,center.y,0,center.x,center.y,20);
  gradient.addColorStop(0,`rgba(255,215,0,${0.5+bloom*0.5})`);
  gradient.addColorStop(1,`rgba(255,165,0,${0.5+bloom*0.5})`);
  ctx.fillStyle=gradient;
  ctx.beginPath();
  ctx.arc(center.x,center.y,20,0,2*Math.PI);
  ctx.fill();
}

// Apology message
const lines=[
"I will never say these words again.",
"Tu, Abay, Ruk. ",
"Today, I speak honestly—",
"with reflection, patience, and truth.",
"This apology is gentle, sincere,",
"and meant for my ❤️ Arooj.  "
];
const lineElements=lines.map((_,i)=>document.getElementById(`line${i+1}`));
let currentLine=0;

function typeNextWord(){
  if(currentLine>=lines.length) return;
  const line = lines[currentLine];
  const words = line.split(" ");
  let currentWord = 0;
  lineElements[currentLine].style.opacity=1;

  function typeWord(){
    if(currentWord>=words.length){
      currentLine++;
      setTimeout(typeNextWord,400);
      return;
    }
    lineElements[currentLine].textContent += (currentWord===0?"":" ") + words[currentWord];
    currentWord++;
    // Aggressive bloom: use exponential scaling for fast growth
    const totalWordsTyped = lines.slice(0,currentLine).reduce((a,l)=>a+l.split(" ").length,0)+currentWord;
    const totalWords = lines.reduce((a,l)=>a+l.split(" ").length,0);
    currentBloom = Math.min(1, Math.pow(totalWordsTyped/totalWords, 0.7)*0.95); // ~95% before last word
    drawFlower(currentBloom);
    setTimeout(typeWord, 250);
  }

  typeWord();
}

// Animate sway continuously
function animate(){ drawFlower(currentBloom); requestAnimationFrame(animate); }

drawFlower(currentBloom);
setTimeout(typeNextWord,500);
animate();
</script>
</body>
</html>
